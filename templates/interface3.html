<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Interface 3 - Paramètres Techniques</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --biat-blue: #003366;
            --biat-orange: #f7941d;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: rgba(0, 0, 0, 0.75);
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <header class="bg-[var(--biat-blue)] text-white py-6 shadow-md">
        <div class="max-w-7xl mx-auto flex items-center justify-between px-6">
            <img src="{{ url_for('static', filename='img/logobiat.jpg') }}" alt="Logo BIAT" class="h-12">
            <h1 class="text-2xl font-bold">Complexité</h1>
                <p class="text-sm text-gray-200">Projet de transformation BIAT</p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto bg-white mt-10 p-12 shadow-lg rounded-xl">
        <h2 class="text-3xl font-semibold text-gray-800 mb-8">Paramètres Techniques</h2>
        <form method="POST" class="space-y-8">
            {% for champ, label, type in [
                ('q1', "Q1. Étendue du périmètre", 'select'),
                ('q2', "Q2. Nombre d'applications", 'number'),
                ('q3', "Q3. Interfaces externes", 'select'),
                ('q4', "Q4. Domaines impactés", 'select'),
                ('q5', "Q5. Client externe impacté", 'select'),
                ('q6', "Q6. Volume d'utilisateurs impacté", 'select'),
                ('q7', "Q7. Proportion de technologies non maitrisées", 'select'),
                ('q8', "Q8. Importance d'une dépendance à un prestataire externe", 'select'),
                ('q9', "Q9. Degré d'incertitude", 'select'),
                ('q10', "Q10. Type de solution", 'select')
            ] %}
            <div class="tooltip">
                <label for="{{ champ }}" class="block text-gray-700 font-medium mb-2 text-lg">{{ label }} *</label>
                {% if type == 'number' %}
                    <input type="number" name="{{ champ }}" id="{{ champ }}" min="0" required
                        class="w-full border border-gray-300 rounded-lg px-6 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--biat-orange)] text-lg">
                {% else %}
                    <select name="{{ champ }}" id="{{ champ }}" required
                        class="w-full border border-gray-300 rounded-lg px-6 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--biat-orange)] text-lg">
                        <option disabled selected value="">-- Sélectionner --</option>
                        {% if champ == 'q1' %}
                            <option value="petit">Petit</option>
                            <option value="moyen">Moyen</option>
                            <option value="large">Large</option>
                            <option value="tres_large">Très large</option>
                        {% elif champ == 'q3' %}
                            <option value="0">Aucune</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4-5">4-5</option>
                        {% elif champ == 'q4' %}
                            <option value="1">1</option>
                            <option value="2_3">2 à 3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="plus_9">Plus de 9</option>
                        {% elif champ == 'q5' %}
                            <option value="non">Non</option>
                            <option value="tres_faible">Impact Très Faible</option>
                            <option value="faible">Impact Faible</option>
                            <option value="moyen">Impact Moyen</option>
                            <option value="fort">Impact Fort</option>
                        {% elif champ == 'q6' %}
                            <option value="1_5">1 à 5</option>
                            <option value="6_10">6 à 10</option>
                            <option value="11_20">11 à 20</option>
                            <option value="21_50">21 à 50</option>
                            <option value="51_100">51 à 100</option>
                            <option value="101_200">101 à 200</option>
                            <option value="201_500">201 à 500</option>
                            <option value="501_1000">501 à 1000</option>
                            <option value="plus_1000">Plus de 1000</option>
                        {% elif champ in ['q7', 'q8'] %}
                            <option value="inexistant">Inexistant</option>
                            <option value="faible">Faible</option>
                            <option value="moyenne">Moyenne</option>
                            <option value="elevee">Élevée</option>
                            <option value="tres_elevee">Très Élevée</option>
                        {% elif champ == 'q9' %}
                            <option value="tres_faible">Très Faible</option>
                            <option value="faible">Faible</option>
                            <option value="moyen">Moyen</option>
                            <option value="eleve">Élevé</option>
                            <option value="tres_eleve">Très Élevé</option>
                        {% elif champ == 'q10' %}
                            <option value="evolution_systeme">Évolution d'un système existant</option>
                            <option value="integration_partenaire">Intégration partenaire sans modification</option>
                            <option value="creation_nouveau">Création de nouveau système</option>
                        {% endif %}
                    </select>
                {% endif %}
                <span class="tooltip-text">
                    {% if champ == 'q1' %}
                      Évaluez la taille du périmètre concerné par le projet (fonctionnel, organisationnel, géographique).
                    {% elif champ == 'q2' %}
                      Indiquez le nombre d'applications impliquées dans ce projet.
                    {% elif champ == 'q3' %}
                      Nombre d’interfaces avec d’autres systèmes externes à gérer ou développer.
                    {% elif champ == 'q4' %}
                      Combien de domaines métier sont directement impactés par ce projet.
                    {% elif champ == 'q5' %}
                      Le projet impacte-t-il un client externe ? Évaluez la criticité de cet impact.
                    {% elif champ == 'q6' %}
                      Estimez combien d’utilisateurs seront directement impactés par le projet.
                    {% elif champ == 'q7' %}
                      Quelle part du projet fait appel à des technologies que l’équipe ne maîtrise pas ?
                    {% elif champ == 'q8' %}
                      Dépendance vis-à-vis d’un prestataire externe (expertise, livrables, délais, etc.).
                    {% elif champ == 'q9' %}
                      Degré d’incertitude sur les besoins, les solutions ou les délais liés au projet.
                    {% elif champ == 'q10' %}
                      Type de solution envisagée : modification d’un existant ou création d’un nouveau système.
                    {% else %}
                      Information supplémentaire pour {{ label }}.
                    {% endif %}
                  </span>
                  
            </div>
            {% endfor %}

            <div class="flex justify-between items-center pt-8">
                <a href="{{ url_for('interface2') }}" class="text-[var(--biat-blue)] underline hover:text-blue-700">
                    ← Retour
                </a>
                <button type="submit" class="bg-[var(--biat-orange)] text-white font-semibold px-8 py-3 rounded-lg hover:bg-orange-500 transition">
                    Calculer le score
                </button>
            </div>
        </form>
    </main>
</body>
</html>
